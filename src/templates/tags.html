{% extends "base.html" %}

{% block title %}Curator Tag Vocabulary{% endblock %}

{% block content %}
<div class="header">
    <h1>Curator Tag Vocabulary</h1>
    
    <div class="stats">
        <div class="stat-item">
            <span class="stat-label">Total Tags</span>
            <span class="stat-value total" id="stat-total">-</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Available</span>
            <span class="stat-value available" id="stat-available">-</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Unavailable</span>
            <span class="stat-value unavailable" id="stat-unavailable">-</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Deleted</span>
            <span class="stat-value deleted" id="stat-deleted">-</span>
        </div>
    </div>
</div>

<div class="controls-wrapper">
    <div class="controls">
        <input type="text" id="search-input" placeholder="Search tags..." style="min-width: 200px;">
        
        <select id="deleted-select">
            <option value="active" selected>Not Deleted</option>
            <option value="all">All</option>
            <option value="deleted">Deleted</option>
        </select>

        <select id="filter-select">
            <option value="all">All Tags</option>
            <option value="available" selected>Available Tags</option>
            <option value="unavailable">Unavailable Tags</option>
        </select>

        <select id="category-select">
            <option value="">All Categories</option>
        </select>

        <select id="sort-select">
            <option value="tag" selected>Sort by Name</option>
            <option value="translation">Sort by Translation</option>
            <option value="updated_at">Sort by Updated Time</option>
            <option value="id">Sort by ID</option>
        </select>

        <select id="order-select">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
        </select>

        <button class="btn btn-primary" id="load-btn">Load Tags</button>
        <button class="btn btn-success" id="add-btn">Add Tag</button>
        <button class="btn btn-danger" id="export-protobuf-btn">Export Protobuf</button>
        <button class="btn btn-danger" id="export-csv-btn">Export CSV</button>
    </div>
</div>

<div class="container">
    <div id="tags-container">
        <div class="loading">Loading tags...</div>
    </div>

    <div class="pagination" id="pagination" style="display: none;">
        <button class="btn btn-secondary" id="prev-btn" disabled>上一页</button>
        <div class="page-info">
            <span id="page-info">第 1 页，共 1 页</span>
        </div>
        <button class="btn btn-secondary" id="next-btn" disabled>下一页</button>
    </div>
</div>

<div id="add-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">添加标签</div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">标签名称 *</label>
                <input type="text" class="form-input" id="new-tag-name" placeholder="输入标签名称">
            </div>
            <div class="form-group">
                <label class="form-label">上下文</label>
                <textarea class="form-textarea" id="new-tag-context" placeholder="关于标签的含义说明"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">分类</label>
                <select class="form-input" id="new-tag-category">
                    <option value="">选择分类</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">中文翻译</label>
                <input type="text" class="form-input" id="new-tag-translation-zh" placeholder="输入中文翻译">
            </div>
            <div class="form-group">
                <label class="form-label">英文翻译</label>
                <input type="text" class="form-input" id="new-tag-translation-en" placeholder="Enter English translation">
            </div>
            <div class="form-group">
                <label class="form-checkbox">
                    <input type="checkbox" id="new-tag-available" checked>
                    <span>可用</span>
                </label>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn btn-secondary" onclick="closeAddModal()">取消</button>
            <button class="btn btn-success" onclick="saveNewTag()">保存</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/tags.js') }}"></script>
{% endblock %}
